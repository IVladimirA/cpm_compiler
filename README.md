# C+- toy language parser and compiler
## Project description
Flex (Fast Lexical Analyzer Generator) and Bison (parser generator) are being used to parse C+- toy language source file `.cpm` and create abstract syntax tree (AST). Then corresponding C++ file `.cpp` is generated and compiled into executable.
## C+- description
- C+- consists only of
    1. Variables `var a;` and constants `val b`
    2. Numeric and string literals (`43`, `12.3`, `"my string"`, etc)
    3. Addition, subtraction and assignment operators `+`, `-`, `=`
    4. Output function `print()`
    5. Input function `input()`
- There are only 3 types of values
    1. Int - 8 byte
    2. String - sequence of characters
    3. Float - 8 byte
- C+- is an implicit dynamic typization language
    1. Same variable can store numbers and strings, the following is correct
    ```
    var a = 5.5;
    a = "Hello";
    a = 34.5;
    ```
    2. Operators follow rules (order of arguments doesn't matter)
        - String + Int/Float: Numeric converts to string
        - String - Int/Float: String converts to Int/Float, if it's not possible String value considered to be `0`
        - Int/Float + Int/Float: Int converts to Float if necessary
- Code example
    ```
    var str = "Hello";
    str = str + "1";
    print(str);
    str = 21 + 2 + 18;
    val worldString = "World";
    val answerNumber = 42;
    print(worldString + answerNumber);
    print(worldString - answerNumber);
    val pi = 3.14;
    print(pi + answerNumber);
    val numberString = "134";
    print(numberString + answerNumber);
    print(numberString - answerNumber);
    val name = input("Name ");
    print("Your name is " + name);
    ```
    Output
    ```
    Hello1
    World42
    -42
    45.14
    13442
    92.
    Name Vladimir
    Your name is Vladimir
    ```


    
## Setup
Clone repository
```
https://github.com/IVladimirA/cpm_compiler.git
```
or download the archive
```
cpm_compiler.zip
```
## Usage
Transpile `example/a.cpm` file into `out/a.cpp` and then compile it to an `out/a.o` executable
```
make
```
Run `out/a.o` (also executes `make` command if needed)
```
make run
```
Clear all generated by transpilation and compilation files
```
make clean
```
Pack project in zip archive (requires parser files to be generated)
```
make pack
```
## Prerequisites
- g++ 9.3.0
- flex 2.6.4
- bison 3.5.1
- make 4.2.1